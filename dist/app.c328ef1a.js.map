{"version":3,"sources":["app.js"],"names":["video","document","querySelector","canvas","photobooth","getElementsByTagName","ctx","getContext","window","SpeechRecognition","webkitSpeechRecognition","h1","createElement","words","colors","getVideo","navigator","mediaDevices","getUserMedia","audio","then","localMediaStream","console","log","srcObject","play","catch","err","error","paintToCanvas","width","videoWidth","height","videoHeight","setInterval","drawImage","pixels","getImageData","rgbSplit","globalAlpha","putImageData","i","data","length","recognition","continuous","interimResults","lang","appendChild","test","addEventListener","e","transcript","Array","from","results","map","result","join","textContent","isFinal","includes","emoji","classList","add","start"],"mappings":"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","file":"app.c328ef1a.js","sourceRoot":"..","sourcesContent":["const video = document.querySelector(\".player\");\r\nconst canvas = document.querySelector(\".photo\");\r\nconst photobooth = document.getElementsByTagName(\"html\")[0];\r\nconst ctx = canvas.getContext(\"2d\");\r\nwindow.SpeechRecognition =\r\n  window.SpeechRecognition || window.webkitSpeechRecognition;\r\nlet h1 = document.createElement(\"h1\");\r\nconst words = document.querySelector(\".words\");\r\n\r\nconst colors = [\r\n  \"aqua\",\r\n  \"azure\",\r\n  \"beige\",\r\n  \"bisque\",\r\n  \"black\",\r\n  \"blue\",\r\n  \"brown\",\r\n  \"chocolate\",\r\n  \"coral\",\r\n  \"crimson\",\r\n  \"cyan\",\r\n  \"fuchsia\",\r\n  \"ghostwhite\",\r\n  \"gold\",\r\n  \"goldenrod\",\r\n  \"gray\",\r\n  \"green\",\r\n  \"indigo\",\r\n  \"ivory\",\r\n  \"khaki\",\r\n  \"lavender\",\r\n  \"lime\",\r\n  \"linen\",\r\n  \"magenta\",\r\n  \"maroon\",\r\n  \"moccasin\",\r\n  \"navy\",\r\n  \"olive\",\r\n  \"orange\",\r\n  \"orchid\",\r\n  \"peru\",\r\n  \"pink\",\r\n  \"plum\",\r\n  \"purple\",\r\n  \"red\",\r\n  \"salmon\",\r\n  \"sienna\",\r\n  \"silver\",\r\n  \"snow\",\r\n  \"tan\",\r\n  \"teal\",\r\n  \"thistle\",\r\n  \"tomato\",\r\n  \"turquoise\",\r\n  \"violet\",\r\n  \"white\",\r\n  \"yellow\",\r\n];\r\n\r\nfunction getVideo() {\r\n  navigator.mediaDevices\r\n    .getUserMedia({\r\n      video: true,\r\n      audio: false,\r\n    })\r\n    .then((localMediaStream) => {\r\n      console.log(localMediaStream);\r\n      video.srcObject = localMediaStream;\r\n      video.play();\r\n    })\r\n    .catch((err) => {\r\n      console.error(`Oh No`, err);\r\n    });\r\n}\r\n\r\nfunction paintToCanvas() {\r\n  const width = video.videoWidth;\r\n  const height = video.videoHeight;\r\n  canvas.width = width;\r\n  canvas.height = height;\r\n\r\n  return setInterval(() => {\r\n    ctx.drawImage(video, 0, 0, width, height);\r\n    // take the pixel out\r\n    let pixels = ctx.getImageData(0, 0, width, height);\r\n    // mess with them\r\n    // pixels = redEffect(pixels);\r\n    pixels = rgbSplit(pixels);\r\n    ctx.globalAlpha = 0.8;\r\n    // pixels = greenScreen(pixels);\r\n    // pixels = greenScreen(pixels)\r\n    // put them back\r\n    ctx.putImageData(pixels, 0, 0);\r\n  }, 16);\r\n}\r\n\r\nfunction rgbSplit(pixels) {\r\n  for (let i = 0; i < pixels.data.length; i += 4) {\r\n    pixels.data[i - 150] = pixels.data[i + 0]; // red\r\n    pixels.data[i + 500] = pixels.data[i + 1]; // green\r\n    pixels.data[i - 550] = pixels.data[i + 2]; // blue\r\n  }\r\n  return pixels;\r\n}\r\n\r\ngetVideo();\r\n\r\n//! Speech recognition\r\n\r\nconst recognition = new SpeechRecognition();\r\nrecognition.continuous = true;\r\nrecognition.interimResults = true;\r\nrecognition.lang = \"en\";\r\n\r\nwords.appendChild(h1);\r\n\r\nfunction test() {\r\n  recognition.addEventListener(\"result\", (e) => {\r\n    // console.log(e);\r\n    const transcript = Array.from(e.results)\r\n      .map((result) => result[0])\r\n      .map((result) => result.transcript)\r\n      .join(\"\");\r\n    h1.textContent = transcript;\r\n    if (e.results[0].isFinal) {\r\n      // if we finish talking we create another paragraph\r\n      h1 = document.createElement(\"h1\");\r\n      words.appendChild(h1);\r\n    }\r\n    if (transcript.includes(\"unicorn\")) {\r\n      const emoji = document.createElement(\"span\");\r\n      emoji.textContent = \"ðŸ¦„\";\r\n      photobooth.classList.add(\"unicorn\");\r\n      canvas.classList.add(\"unicorn\");\r\n\r\n      console.log(\"yei\");\r\n      words.appendChild(emoji);\r\n    }\r\n    console.log(transcript);\r\n  });\r\n  recognition.start();\r\n}\r\n\r\n/* function colorBackground(color) {\r\n  colors.map((color) => {\r\n    console.log(color);\r\n  });\r\n}\r\n\r\ncolorBackground() */\r\n\r\nvideo.addEventListener(\"canplay\", paintToCanvas);\r\nrecognition.addEventListener(\"end\", test);\r\ntest();\r\n"]}